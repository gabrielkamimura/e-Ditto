function eDittoButtonBar(t,e,o){var n=[],t=t,a=$("<div id='b"+e+"' class='editorBotoes'></div>");a.insertBefore($(t.textarea));var r=document.getElementById("b"+e);if(this.adicionarGrupo=function(t){r.appendChild(t.getGroupHTML())},this.verificarBotoes=function(){for(i in n)n[i].botao.verificaAtivacao(t,n[i].acao)},this.adicionarBotaoVerificacao=function(t,e){n.push({botao:t,acao:e}),this.verificarBotoes()},$(t.frame).on("keypress focus change click select",function(){for(var e in n)n[e].botao.verificaAtivacao(t,n[e].acao)}),!o.disableDefaultComponents){var c=this;console.log("Carregando elementos padrão do editor");var u=new eDittoButtonGroup(c),s=new eDittoButton(u,"bold","Negrito");s.getButtonDOM().onclick=function(){c.adicionarBotaoVerificacao(s,"bold"),t.formatar("bold"),c.verificarBotoes()};var l=new eDittoButton(u,"italic","Itálico");c.adicionarBotaoVerificacao(l,"italic"),l.getButtonDOM().onclick=function(){t.formatar("italic"),c.verificarBotoes()};var f=new eDittoButton(u,"underline","Sublinhado");c.adicionarBotaoVerificacao(f,"underline"),f.getButtonDOM().onclick=function(){t.formatar("underline"),c.verificarBotoes()};var m=new eDittoButtonGroup(c),d=[{texto:"Preto",valor:"#000"},{texto:"Cinza",valor:"#9e9e9e"},{texto:"Marrom",valor:"#795548"},{texto:"Azul",valor:"#2196F3"},{texto:"Vermelho",valor:"#F44336"},{texto:"Amarelo",valor:"#ffeb3b"},{texto:"Verde",valor:"#4caf50"},{texto:"Laranja",valor:"#ff9800"},{texto:"Roxo",valor:"#9c27b0"},{texto:"Rosa",valor:"#e91e63"},{texto:"Ciano",valor:"#00bcd4"},{texto:"Azul claro",valor:"#03a9f4"},{texto:"Índigo",valor:"#3f51b5"},{texto:"Lima",valor:"#cddc39"},{texto:"Laranja Escuro",valor:"#ff5722"},{texto:"Rosa Claro",valor:"#F8BBD0"},{texto:"Teal",valor:"#009688"},{texto:"Roxo Escuro",valor:"#673AB7"}],v=new eDittoButton(m,"Fonte","",2,d);v.getButtonDOM().onchange=function(){t.formatar("forecolor",v.getValue())};var h=[{texto:"1",valor:"1"},{texto:"2",valor:"2"},{texto:"3",valor:"3"},{texto:"4",valor:"4"},{texto:"5",valor:"5"},{texto:"6",valor:"6"},{texto:"7",valor:"7"}],B=new eDittoButton(m,"Fonte","",2,h);B.getButtonDOM().onchange=function(){t.formatar("fontSize",B.getValue())};var g=[{texto:"Arial",valor:"arial"},{texto:"Courier",valor:"courier"}],D=new eDittoButton(m,"Fonte","",2,g);D.getButtonDOM().onchange=function(){t.formatar("fontname",D.getValue())};var x=new eDittoButtonGroup(c),p=new eDittoButton(x,"align-left","Alinhar à Esquerda");c.adicionarBotaoVerificacao(p,"justifyleft"),p.getButtonDOM().onclick=function(){t.formatar("justifyleft"),c.verificarBotoes()};var b=new eDittoButton(x,"align-center","Centralizar");c.adicionarBotaoVerificacao(b,"justifycenter"),b.getButtonDOM().onclick=function(){t.formatar("justifycenter"),c.verificarBotoes()};var E=new eDittoButton(x,"align-right","Alinhar à direita");c.adicionarBotaoVerificacao(E,"justifyright"),E.getButtonDOM().onclick=function(){t.formatar("justifyright"),c.verificarBotoes()};var y=new eDittoButtonGroup(c),M=new eDittoButton(y,"list-ol","Lista Numérica");c.adicionarBotaoVerificacao(M,"insertorderedlist"),M.getButtonDOM().onclick=function(){t.formatar("insertorderedlist"),c.verificarBotoes()};var w=new eDittoButton(y,"list-ul","Lista");c.adicionarBotaoVerificacao(w,"insertunorderedlist"),w.getButtonDOM().onclick=function(){t.formatar("insertunorderedlist"),c.verificarBotoes()};var I=new eDittoButtonGroup(c),k=new eDittoButton(I,"link","link");k.getButtonDOM().onclick=function(){var e=prompt("Digite a URL do link: ","http://");e&&""!=e&&"http://"!=e&&t.formatar("createlink",e)};var V=new eDittoButton(I,"unlink","Remover Link");V.getButtonDOM().onclick=function(){t.formatar("unlink")};var O=new eDittoButton(I,"eraser","Limpar Formatação");O.getButtonDOM().onclick=function(){t.formatar("removeFormat")}}}function eDittoButton(t,e,o,n,a){var r=n||1,c=e||"",u=o,t=t;if(this.obterGrupoBotoes=function(){return t},2===r){var s=document.createElement("select");if(s.className="editorSelect",a)for(i in a){var l=document.createElement("option");l.innerHTML=a[i].texto,l.value=a[i].valor,s.appendChild(l)}else console.warning("Defina as opções")}else{var s=document.createElement("button"),f=document.createElement("i");s.type="button",u&&(s.title=u),s.className="editorButton",f.className="fa fa-"+c,s.appendChild(f)}this.verificaAtivacao=function(t,e){2===r?s.value=t.verificaFormatacao(e):t.verificaFormatacao(e)?this.marcarBotao():this.desmarcarBotao()},this.marcarBotao=function(){s.className="editorButton ativo"},this.desmarcarBotao=function(){s.className="editorButton"},this.getButtonDOM=function(){return s},this.getValue=function(){return 2==r?this.getButtonDOM().value:null},this.definirIcone=function(t){f.className="fa fa-"+t},t.adicionarBotao(this)}function eDittoDocument(t,e){this.textarea=document.getElementById(t);var o=$("<iframe contenteditable='true' class='editorDocumento' id='t"+t+"'></iframe>"),e=e||null,n=this;o.insertAfter($(this.textarea)),this.textarea.style.display="none",document.getElementById("t"+t).onload=function(){n.frame=n.getIframeDocument("t"+t),n.permitirEdicao()},this.obterEditor=function(){return e},this.getIframeDocument=function(t){return document.getElementById(t).contentWindow?document.getElementById(t).contentWindow.document:document.getElementById(t).contentDocument?document.getElementById(t).contentDocument:document.frames[t].document?document.frames[t].document:null},this.getIframe=function(t){return document.getElementById(t).contentDocument?document.getElementById(t):document.frames[t]},this.getValue=function(){this.frame.body.innerHTML=this.textarea.value},this.setValue=function(){this.textarea.value=this.frame.body.innerHTML},this.frame=this.getIframeDocument("t"+t),this.getSelectedText=function(){return this.frame.getSelection?txt=this.frame.getSelection():this.frame.getSelection()?txt=this.frame.getSelection():this.frame.selection&&(txt=this.frame.selection.createRange().text),txt},this.permitirEdicao=function(){this.getValue(),this.frame.designMode="On",this.getIframe("t"+t).focus()};var n=this;$("#t"+t).ready(function(){n.frame=n.getIframeDocument("t"+t),n.getValue()});var i=null;this.pararPassag=function(){clearInterval(i),i=null},this.iniciarPassagem=function(){i=setInterval(function(){n.setValue()},500)},this.iniciarPassagem(),this.formatar=function(e,o){o=o||null,this.getIframe("t"+t).focus(),this.frame.execCommand(e,!1,o),this.getIframe("t"+t).focus()},this.inserirElemento=function(t){if(this.getSelectedText){var e=this.frame.createElement("div"),o=this.getSelectedText().getRangeAt(0);o.surroundContents(e),e.innerHTML=t}},this.verificaFormatacao=function(t){return this.frame.queryCommandState(t)};var a=function(t,e,o){for(var t=t||"";-1!=t.indexOf(e);)t=t.replace(e,o);return t},r=function(t){var t=t||null;return t=a(a(t,"<","&lt"),">","&gt")};this.carregar=function(t,e){var o=this;$(this.getSelectedText()).load(t,function(t){var n=t+"<br/>";if(e)for(s in e){var i="{{ "+e[s].variavel+" }}";n=a(n,i,r(e[s].valor))}o.inserirElemento(n)})},this.inserirComponente=function(t,e){var o=this,n=t+"<br/>";if(e)for(s in e){var i="{{ "+e[s].variavel+" }}";n=a(n,i,r(e[s].valor))}o.inserirElemento(n)},this.inserirTexto=function(t){var e=this;e.inserirElemento(r(t))};var c=document.styleSheets,u=[];for(var s in c){var l=c[s].cssRules;for(var f in l)u.push(l[f].cssText)}var m=n.frame.createElement("style");m.type="text/css",m.innerHTML=u.join("\n"),n.frame.head.appendChild(m)}function eDitto(t,e){var e=e||{};documento=new eDittoDocument(t,this),botoes=new eDittoButtonBar(documento,t,e),btnAtivacao=[],documento.permitirEdicao(),this.obterBarraBotoes=function(){return botoes},this.obterDocumento=function(){return documento}}function eDittoButtonGroup(t){var e=document.createElement("div"),t=t;e.className="editorGroupButton",this.obterBarraBotoes=function(){return t},this.adicionarBotao=function(t){e.appendChild(t.getButtonDOM())},this.getGroupHTML=function(){return e},t.adicionarGrupo(this)}
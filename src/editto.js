function acao(t){this.carregar=function(o){$(t.getSelectedText()).load(o,function(o){console.log(o);var e=o+"<br/>";t.inserirElemento(e)})},this.formatar=function(o,e){t.formatar(o,e)},this.verificaFormatacao=function(o){t.verificaFormatacao(o)},this.btn=new botao}function barraBotoes(t,o){var t=t,e=$("<div id='b"+o+"' class='editorBotoes'></div>");e.insertBefore($(t.textarea));var a=document.getElementById("b"+o);this.adicionarGrupo=function(t){a.appendChild(t)}}function botao(t,o,e,a){var n=e||1,r=t||"",c=o;if(2===n){var u=document.createElement("select");if(u.className="editorSelect",a)for(i in a){var s=document.createElement("option");s.innerHTML=a[i].texto,s.value=a[i].valor,u.appendChild(s)}else console.warning("Defina as opções")}else{var u=document.createElement("button"),f=document.createElement("i");u.type="button",c&&(u.title=c),u.className="editorButton",f.className="fa fa-"+r,u.appendChild(f)}this.verificaAtivacao=function(t,o){2===n?u.value=t.verificaFormatacao(o):t.verificaFormatacao(o)?this.marcarBotao():this.desmarcarBotao()},this.marcarBotao=function(){u.className="editorButton ativo"},this.desmarcarBotao=function(){u.className="editorButton"},this.getButton=function(){return u},this.getValue=function(){return 2==n?this.getButton().value:null},this.setAction=function(){},this.definirIcone=function(t){f.className="fa fa-"+t}}function documentoEditor(t){this.textarea=document.getElementById(t);var o=$("<iframe contenteditable='true' class='editorDocumento' id='t"+t+"'></iframe>"),e=this;$("#btn-ligar").click(function(){e.frame=e.getIframeDocument("t"+t),e.permitirEdicao()}),o.insertAfter($(this.textarea)),this.textarea.style.display="none",this.getIframeDocument=function(t){return document.getElementById(t).contentWindow?document.getElementById(t).contentWindow.document:document.getElementById(t).contentDocument?document.getElementById(t).contentDocument:document.frames[t].document?document.frames[t].document:null},this.getIframe=function(t){return document.getElementById(t).contentDocument?document.getElementById(t):document.frames[t]},this.getValue=function(){this.frame.body.innerHTML=this.textarea.value},this.setValue=function(){this.textarea.value=this.frame.body.innerHTML},this.frame=this.getIframeDocument("t"+t),this.getSelectedText=function(){return this.frame.getSelection?txt=this.frame.getSelection():this.frame.getSelection()?txt=this.frame.getSelection():this.frame.selection&&(txt=this.frame.selection.createRange().text),txt},this.permitirEdicao=function(){this.getValue(),this.frame.designMode="On",this.getIframe("t"+t).focus()};var e=this;$("#t"+t).ready(function(){e.frame=e.getIframeDocument("t"+t),e.getValue()}),$(this.getIframe("t"+t)).on("keydown keypress select focus change blur click submit",function(){e.setValue()}),this.formatar=function(o,e){e=e||null,this.getIframe("t"+t).focus(),this.frame.execCommand(o,!1,e),this.getIframe("t"+t).focus()},this.inserirElemento=function(t){if(this.getSelectedText){var o=document.createElement("div"),e=this.getSelectedText().getRangeAt(0);e.surroundContents(o),o.innerHTML=t}},this.verificaFormatacao=function(t){return this.frame.queryCommandState(t)}}function editor(t){var o=new documentoEditor(t);o.permitirEdicao();var e=new barraBotoes(o,t);this.executar=new acao(o);var a=[],n=function(){for(i in a)a[i].botao.verificaAtivacao(o,a[i].acao)};this.obterDocumento=function(){return o},this.adicionarBotaoVerificacao=function(t,o){a.push({botao:t,acao:o}),n()};var r=this,c=new botao("bold","Negrito");c.getButton().onclick=function(){r.adicionarBotaoVerificacao(c,"bold"),o.formatar("bold"),n()};var u=new botao("italic","Itálico");a.push({botao:u,acao:"italic"}),u.getButton().onclick=function(){o.formatar("italic"),n()};var s=new botao("underline","Sublinhado");r.adicionarBotaoVerificacao(s,"underline"),s.getButton().onclick=function(){o.formatar("underline"),n()};var f=[{texto:"Preto",valor:"#000"},{texto:"Azul",valor:"#2196F3"},{texto:"Vermelho",valor:"#F44336"}],l=new botao("Fonte","",2,f);r.adicionarBotaoVerificacao(l,"forecolor"),l.getButton().onclick=function(){o.formatar("forecolor",l.getValue())};var d=[{texto:"Arial",valor:"arial"},{texto:"Courier",valor:"courier"}],m=new botao("Fonte","",2,d);r.adicionarBotaoVerificacao(m,"fontname"),m.getButton().onclick=function(){o.formatar("fontname",m.getValue())};var g=new botao("align-left","Alinhar à Esquerda");r.adicionarBotaoVerificacao(g,"justifyleft"),g.getButton().onclick=function(){o.formatar("justifyleft"),n()};var h=new botao("align-center","Centralizar");r.adicionarBotaoVerificacao(h,"justifycenter"),h.getButton().onclick=function(){o.formatar("justifycenter"),n()};var B=new botao("align-right","Alinhar à direita");r.adicionarBotaoVerificacao(B,"justifyright"),B.getButton().onclick=function(){o.formatar("justifyright"),n()};var v=new botao("list-ol","Lista Numérica");r.adicionarBotaoVerificacao(v,"insertorderedlist"),v.getButton().onclick=function(){o.formatar("insertorderedlist"),n()};var p=new botao("list-ul","Lista");r.adicionarBotaoVerificacao(p,"insertunorderedlist"),p.getButton().onclick=function(){o.formatar("insertunorderedlist"),n()};var b=new botao("link","link");b.getButton().onclick=function(){var t=prompt("Digite a URL do link: ","http://");t&&""!=t&&"http://"!=t&&o.formatar("createlink",t)};var w=new botao("unlink","Remover Link");w.getButton().onclick=function(){o.formatar("unlink")};var k=new botao("eraser","Limpar Formatação");k.getButton().onclick=function(){o.formatar("removeFormat")};var y=new grupoBotoes;y.adicionarBotao(m),y.adicionarBotao(l);var x=new grupoBotoes;x.adicionarBotao(c),x.adicionarBotao(u),x.adicionarBotao(s);var E=new grupoBotoes;E.adicionarBotao(g),E.adicionarBotao(h),E.adicionarBotao(B);var I=new grupoBotoes;I.adicionarBotao(v),I.adicionarBotao(p);var V=new grupoBotoes;V.adicionarBotao(b),V.adicionarBotao(w),V.adicionarBotao(k),e.adicionarGrupo(y.getGroup()),e.adicionarGrupo(x.getGroup()),e.adicionarGrupo(E.getGroup()),e.adicionarGrupo(I.getGroup()),e.adicionarGrupo(V.getGroup());var G=new grupoBotoes;this.addPersonalizacao=function(t){G.adicionarBotao(t.ac.btn)},e.adicionarGrupo(G.getGroup()),$(o.frame).on("keypress focus change click select",function(){for(i in a)a[i].botao.verificaAtivacao(o,a[i].acao)})}function grupoBotoes(){var t=document.createElement("div");t.className="editorGroupButton",this.adicionarBotao=function(o){t.appendChild(o.getButton())},this.getGroup=function(){return t}}function personalizacaoEditor(t){this.ac=new acao(t),this.definirIcone=function(t){this.ac.btn.definirIcone(t)}}